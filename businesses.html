<!-- Full working code -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Businesses | MyRevenue</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/feather-icons"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#0f2a44',
        secondary: '#163a5f',
        accent: '#2563eb',
        active: '#16a34a',
        pending: '#facc15',
        inactive: '#dc2626',
        pending: '#f59e0b',
        suspended: '#dc2626'
      }
    }
  }
}
</script>
</head>
<body class="bg-slate-100 text-slate-800">

<header class="bg-primary text-white">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
    <div class="flex items-center gap-3">
      <div class="w-9 h-9 bg-white text-primary font-bold rounded-lg flex items-center justify-center">FRD</div>
      <span class="font-semibold">MyRevenue</span>
    </div>
    <div class="flex items-center gap-4 text-sm">
      <span id="welcomeName">Welcome</span>
      <a href="login.html" class="bg-white/10 px-4 py-2 rounded-lg hover:bg-white/20">Log out</a>
    </div>
  </div>
</header>

<div class="max-w-7xl mx-auto px-6 py-8 grid grid-cols-1 md:grid-cols-4 gap-8">
  <aside class="md:col-span-1 bg-white rounded-2xl shadow p-5 space-y-4 text-sm">
    <a href="my-revenue.html" class="flex items-center gap-2 text-slate-600 hover:text-primary"><i data-feather="home"></i> Overview</a>
    <a href="tax-returns.html" class="flex items-center gap-2 text-slate-600 hover:text-primary"><i data-feather="file-text"></i> Tax returns</a>
    <a href="payments.html" class="flex items-center gap-2 text-slate-600 hover:text-primary"><i data-feather="credit-card"></i> Payments</a>
    <a href="refunds-balances.html" class="flex items-center gap-2 text-slate-600 hover:text-primary"><i data-feather="dollar-sign"></i> Refunds & balances</a>
    <a href="businesses.html" class="flex items-center gap-2 font-semibold text-primary"><i data-feather="briefcase"></i> Businesses</a>
    <a href="messages.html" class="flex items-center gap-2 text-slate-600 hover:text-primary"><i data-feather="message-square"></i> Messages</a>
    <a href="settings.html" class="flex items-center gap-2 text-slate-600 hover:text-primary"><i data-feather="settings"></i> Settings</a>
  </aside>

  <main class="md:col-span-3 space-y-8">
    <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6">
      <h1 class="text-2xl font-bold">Registered Businesses</h1>
      <input type="text" id="searchInput" placeholder="Search by business name..."
             class="mt-3 md:mt-0 border rounded-xl px-4 py-2 w-full md:w-64 focus:ring-2 focus:ring-accent focus:outline-none" />
    </div>

    <div id="businessList" class="space-y-4"></div>
  </main>
</div>

<!-- Modal -->
<div id="detailsModal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-2xl shadow-xl max-w-lg w-full p-6 relative">
    <button id="closeModal" class="absolute top-3 right-3 text-slate-500 hover:text-slate-800">
      <i data-feather="x"></i>
    </button>
    <h2 class="text-xl font-bold mb-4" id="modalBusinessName"></h2>
    <div class="space-y-2 text-sm">
      <p><span class="font-semibold">Business ID:</span> <span id="modalBusinessID"></span></p>
      <p><span class="font-semibold">Type:</span> <span id="modalBusinessType"></span></p>
      <p><span class="font-semibold">Status:</span> <span id="modalBusinessStatus"></span></p>
      <p><span class="font-semibold">Last Payment:</span> <span id="modalBusinessPayment"></span></p>
      <p><span class="font-semibold">Registration Date:</span> <span id="modalBusinessRegDate"></span></p>
      <p><span class="font-semibold">Address:</span> <span id="modalBusinessAddress"></span></p>
      <p><span class="font-semibold">Contact:</span> <span id="modalBusinessContact"></span></p>
      <p><span class="font-semibold">Industry:</span> <span id="modalBusinessIndustry"></span></p>
    </div>
  </div>
</div>

<script>
feather.replace();

if(localStorage.getItem('myrevenue_logged_in')!=='true'){window.location.href='login.html';}

const userName = localStorage.getItem('myrevenue_user');
const revenueNumber = localStorage.getItem('myrevenue_revenue_number') || '135876440';
document.getElementById('welcomeName').textContent = `Welcome, ${userName}`;

const businessData = {
  '135876440': [
    {id:'01845',name:'rIndustries',type:'Limited Company',status:'Inactive',lastPayment:'17 Jan 2026',registrationDate:'4 Jan 1994',address:'World Trade Centre, Old CBD, Square City',contact:'Jane Smith - jane@rbank.com',industry:'General'},  
    {id:'02847',name:'rEnergy',type:'Limited Company',status:'Active',lastPayment:'10 Jan 2026',registrationDate:'12 Feb 2008',address:'32 Pine Street, Seagate, Square City',contact:'John Doe - john@renergy.com',industry:'Food & Beverage'},
    {id:'04956',name:'rBank',type:'Public Limited Company',status:'Active',lastPayment:'31 Dec 2025',registrationDate:'3 Mar 2010',address:'2 Oak Street, Upperbank, Masterton',contact:'Jane Smith - jane@rbank.com',industry:'Banking'},
    {id:'10383',name:'rTech',type:'Limited Company',status:'Active',lastPayment:'31 Dec 2025',registrationDate:'12 Apr 2011',address:'456 Finance Ave, Capital City',contact:'Jane Smith - jane@rbank.com',industry:'Technology'},
    {id:'13936',name:'rConstruction',type:'Limited Company',status:'Active',lastPayment:'12 Dec 2025',registrationDate:'30 Aug 2015',address:'456 Finance Ave, Capital City',contact:'Jane Smith - jane@rbank.com',industry:'Contruction'},
    {id:'20018',name:'rBasketball League',type:'Limited Company',status:'Active',lastPayment:'1 Jan 2026',registrationDate:'23 Jul 2019',address:'456 Finance Ave, Capital City',contact:'Jane Smith - jane@rbank.com',industry:'Sporting'}
  
  
  
  ],
  '849786600': [
    {id:'82047',name:'Chuckenâ„¢',type:'Limited Company',status:'Active',lastPayment:'8 Jan 2026',registrationDate:'1 Jun 1986',address:'1 Swanson Street, CBD, Square City',contact:'Mary Johnson - mary@ess.com',industry:'Food & Beverage'},
    {id:'84294',name:'Executive Special Sauces',type:'Sole Trader',status:'Active',lastPayment:'31 Dec 2025',registrationDate:'11 Sep 2025',address:'1 Ravenscroft Avenue, Lowerbank, Masterton',contact:'Mary Johnson - mary@ess.com',industry:'Food & Beverage'}
  ]
};

let businesses = businessData[revenueNumber] || [];
const listContainer = document.getElementById('businessList');

function renderBusinesses(filter=''){
  listContainer.innerHTML='';
  const filtered = businesses.filter(b=>b.name.toLowerCase().includes(filter.toLowerCase()));
  if(filtered.length===0){listContainer.innerHTML='<p class="text-slate-500">No businesses found.</p>';return;}
  
  filtered.forEach((b,index)=>{
    const card=document.createElement('div');
    card.className='bg-white rounded-2xl shadow p-6 flex flex-col md:flex-row md:justify-between md:items-center';
    card.innerHTML=`
      <div>
        <p class="font-semibold text-lg">${b.name}</p>
        <p class="text-slate-500 text-sm">${b.type}</p>
        <p class="text-slate-500 text-sm">Last Payment: ${b.lastPayment}</p>
      </div>
      <div class="mt-3 md:mt-0 flex items-center gap-4">
        <span class="px-3 py-1 rounded-full text-white text-sm font-semibold ${b.status.toLowerCase()==='active'?'bg-active':b.status.toLowerCase()==='pending'?'bg-pending':'bg-suspended'}">${b.status}</span>
        <button class="bg-accent text-white px-4 py-2 rounded-xl hover:opacity-90 view-details-btn" data-index="${index}">View Details</button>
      </div>
    `;
    listContainer.appendChild(card);
  });

  // Attach modal events
  document.querySelectorAll('.view-details-btn').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const business=filtered[btn.dataset.index];
      document.getElementById('modalBusinessName').textContent=business.name;
      document.getElementById('modalBusinessID').textContent=business.id;
      document.getElementById('modalBusinessType').textContent=business.type;
      document.getElementById('modalBusinessStatus').textContent=business.status;
      document.getElementById('modalBusinessPayment').textContent=business.lastPayment;
      document.getElementById('modalBusinessRegDate').textContent=business.registrationDate;
      document.getElementById('modalBusinessAddress').textContent=business.address;
      document.getElementById('modalBusinessContact').textContent=business.contact;
      document.getElementById('modalBusinessIndustry').textContent=business.industry;
      document.getElementById('detailsModal').classList.remove('hidden');
    });
  });
}

renderBusinesses();

document.getElementById('searchInput').addEventListener('input',e=>{renderBusinesses(e.target.value);});

const modal=document.getElementById('detailsModal');
document.getElementById('closeModal').addEventListener('click',()=>{modal.classList.add('hidden');});
modal.addEventListener('click',e=>{if(e.target===modal)modal.classList.add('hidden');});
</script>

</body>
</html>
